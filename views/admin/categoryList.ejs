<%- include('../layouts/admin_layouts/adminHeader.ejs') %>




    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .category-cards-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
}

.category-card {
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 5px;
    width: 300px;
    padding: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.card-body p {
    margin: 10px 0;
}

.card-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.card-actions .actions-offer,
.card-actions .actions-manage {
    display: flex;
    gap: 10px;
}

        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f6f9;
        }
        .main-content {
            padding: 2rem;
        }
        .card {
            box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
            border: none;
        }
        .card-header {
            background-color: #fff;
            border-bottom: 1px solid #e3e6f0;
        }
        .table {
            color: #5a5c69;
        }
        .table thead th {
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid #e3e6f0;
        }
        .btn-custom {
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
        }
        .pagination {
            justify-content: center;
            margin-top: 2rem;
        }
        .breadcrumb {
            background-color: transparent;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="main-content">
        <div class="container-fluid">
            <div class="d-sm-flex align-items-center justify-content-between mb-4">
                <h1 class="h3 mb-0 text-gray-800">Category Management</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="index.html">Dashboard</a></li>
                        <li class="breadcrumb-item"><a href="#">Category</a></li>
                        <li class="breadcrumb-item active" aria-current="page">All Categories</li>
                    </ol>
                </nav>
            </div>

            <div class="card mb-4">
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">All Categories</h6>
                    <a href="new-category.html" class="btn btn-primary btn-custom">
                        <i class="fas fa-plus mr-2"></i>Add New Category
                    </a>
                </div>
                <!-- <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                            <thead class="thead-light">
                                <tr>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Offer Price</th>
                                    <th>Offer</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                                <tbody>
                                    <%cat.reverse().forEach((category,index)=>{%>
                                    <tr>
                                        <td><%=category.name%></td>
                                        <td><%=category.description%></td>
                                        <td></td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary">Add Offer</button>
                                            <button class="btn btn-sm btn-outline-danger">Remove</button>
                                        </td>
                                        <td><span class="badge bg-success"><%if(category.isListed){%>Listed<%}else{%>Unlisted<%}%></span></td>
                                        <td>
                                            <%if(category.isListed){%>
                                            <button class="btn btn-sm btn-outline-warning"><a href="/admin/listcategory?id=<%= category._id %>">Unlist</a></button>
                                            <%}else{%>
                                            
                                                <button class="btn btn-sm btn-outline-warning"><a href="/admin/unlistcategory?id=<%= category._id %>">list</a></button>
                                                <%}%>
                                            <button class="btn btn-sm btn-outline-info"><a href="/admin/editcategory?id=<%= category._id %>"> Edit</a></button>
                                        </td>
                                    </tr>
                                    <%}) %>
                                </tbody>
                        </table>
                    </div>
                </div> -->
                <div class="category-cards-container">
                    <% cat.reverse().forEach((category, index) => { %>
                        <div class="category-card">
                            <div class="card-header">
                                <h3><%= category.name %></h3>
                                <span class="badge bg-success">
                                    <% if (category.isListed) { %>
                                        Listed
                                    <% } else { %>
                                        Unlisted
                                    <% } %>
                                </span>
                            </div>
                            <div class="card-body">
                                <p><strong>Description:</strong> <%= category.description %></p>
                                <p><strong>Offer Price:</strong> <!-- Add offer price here --></p>
                            </div>
                            <div class="card-actions">
                                <div class="actions-offer">
                                    <button class="btn btn-sm btn-outline-primary">Add Offer</button>
                                    <button class="btn btn-sm btn-outline-danger">Remove</button>
                                </div>
                                <div class="actions-manage">
                                    <% if (category.isListed) { %>
                                        <button class="btn btn-sm btn-outline-warning">
                                            <a href="/admin/listcategory?id=<%= category._id %>">Unlist</a>
                                        </button>
                                    <% } else { %>
                                        <button class="btn btn-sm btn-outline-warning">
                                            <a href="/admin/unlistcategory?id=<%= category._id %>">List</a>
                                        </button>
                                    <% } %>
                                    <button class="btn btn-sm btn-outline-info">
                                        <a href="/admin/editcategory?id=<%= category._id %>">Edit</a>
                                    </button>
                                </div>
                            </div>
                        </div>
                    <% }) %>
                </div>
                
            </div>

            <nav aria-label="Page navigation">
                <ul class="pagination">
                    <% if (currentPage > 1) { %>
                    <li class="page-item"><a class="page-link" href="/admin/category?page=<%= currentPage - 1 %>">Previous</a></li>
                    <% } %>
                    <% for (let i = 1; i <= totalPages; i++) { %>
                    <li class="page-item <%= i === currentPage ? 'active' : '' %>">
                        <a class="page-link" href="/admin/category?page=<%= i %>"><%= i %></a>
                    </li>
                    <% } %>
                    <% if (currentPage < totalPages) { %>
                    <li class="page-item"><a class="page-link" href="/admin/category?page=<%= currentPage + 1 %>">Next</a></li>
                    <% } %>
                </ul>
            </nav>
        </div>
    </div>

    <!-- <script> -->

<!-- // const name = document.getElementById("categoryName").value;
// const description = document.getElementById('descriptionId').value;

    // // Use fetch to send data to the server
    // fetch("/admin/category", {
    //     method: "POST", // Method is POST for submitting data
    //     headers: {
    //         "Content-Type": "application/json" // Specify the content type as JSON
    //     },
    //     body: JSON.stringify({ name, description }) // Convert the form data to JSON
    // })
    // .then(response => {
    //     if (!response.ok) {
    //         return response.json().then(err => {
    //             throw new Error(err.error); // Throw error if response is not ok
    //         });
    //     }
    //     return response.json(); // Parse JSON response
    // })
    // .then(data => {
    //     console.log(data.message); // Optionally handle the response data
    //     window.location.href = "/admin/category"; // Redirect to category list on success
    // })
    // .catch(error => {
    //     // Handle errors and show appropriate messages
    //     if (error.message === "Category already exists") {
    //         Swal.fire({
    //             icon: "error",
    //             text: "Category already exists"
    //         });
    //     } else {
    //         Swal.fire({
    //             icon: "error",
    //             text: "An error occurred while adding the category"
    //         });
    //     }
    // }); -->

    <!-- </script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<%- include('../layouts/admin_layouts/adminFooter.ejs') %>